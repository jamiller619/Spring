$black: #161515;
$black-lite: lighten($black, 20);
$ease: cubic-bezier(.75,.15,.10,1);
$ease-bounce: cubic-bezier(.25, .46, .18, 1.3);

$subtle-shadow: 0 3px 15px rgba(0,0,0,0.2);

@mixin icon-search($color) {
  background-image: url('data:image/svg+xml;utf8,<svg fill="#{$color}" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"> <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/> <path d="M0 0h24v24H0z" fill="none"/> </svg>')
}

* {
  box-sizing: border-box;
}

body {
  width: 100vw;
  height: 100vh;
  display: flex;
  justify-content: flex-end;
  align-items: flex-end;
  overflow: hidden;
  margin: 0;
  padding: 0;
}

@keyframes appear {
  from {
    opacity: 0;
  }
}

@keyframes rotate {
  from {
    transform: rotateZ(-180deg)
  }
}

@keyframes scale {
  from {
    transform: scale(0);
  }
}

@keyframes dial {
  from {
    transform: scale(1);
  }
  to {
    transform: scale(.5);
  }
}

.background {
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-repeat: no-repeat;
  background-size: cover;
  background-position: 50%;
  opacity: 1;
  animation: appear .5s .1s backwards;
}

.digital,
.analog {
  margin: 1vmin;
}

.analog {
  transform: scale(1);
  animation: scale .5s .1s backwards $ease-bounce;

  .dial,
  .face,
  .marker {
    position: absolute;
    width: 100%;
    height: 100%;
    transform-origin: center;
  }

  .dial,
  .face {
    z-index: 1;
  }

  .dial {
    border-radius: 50%;
    background-color: $black;
    animation: dial .5s .1s both $ease-bounce;
  }

  .face {
    opacity: 1;
    animation: appear .5s .6s backwards;
  }

  .marker {
    position: absolute;
    top: 50%;
    left: 50%;
    width: 1.3%;
    height: 1.3%;
    margin: -.65%;
    border-radius: 50%;
    background-color: rgba($black, .9);
  }

  .minutes-container,
  .minute-hand-container,
  .hours-container {
    width: 100%;
    height: 100%;
    animation: rotate 1s $ease;
  }

  .minutes-container {
    mix-blend-mode: multiply;
  }

  .hours,
  .minutes {
    width: 100%;
    height: 100%;
    -webkit-mask-image: url(images/clock-hand.png);
    -webkit-mask-size: 115%;
    -webkit-mask-position: 50%;
    border-radius: 50%;
    overflow: hidden;
  }

  .minutes-container,
  .minute-hand-container {
    margin-top: -100%;
  }

  .minute-hand {
    width: 4px;
    height: 50%;
    margin-left: calc(50% - 2px);
    transform-origin: bottom;
    box-shadow: -1px 0 15px 0 rgba(0,0,0,.2);
  }
}

.digital {
  font-family: -apple-system, system-ui;
  font-weight: 200;
  font-size: 8vmin;
  -webkit-font-smoothing: subpixel-antialiased;
  color: white;
  text-shadow: 1px 1px 2px $black;
  animation: appear .5s .6s backwards;
  opacity: .8;
  z-index: 1;
}

.date,
.time {
  display: block;
  line-height: 1;
}

.date {
  font-size: .3em;
  letter-spacing: .06em;
  text-align: right;
}

.time {
  font-size: 1em;
  text-align: right;
}

.bookmarks {
  position: fixed;
  top: 0;
  left: 0;
  display: flex;
  list-style-type: none;
  margin: 0;
  z-index: 1;
  background: hsla(0,0%,93%,.9);
  padding: 0;
  width: 100vw;

  ul {
    list-style-type: none;
    margin: 0;
    padding: 0;
    overflow: hidden;
  }

  a {
    display: flex;
    align-items: end;
    position: relative;
    text-decoration: none;
    color: currentColor;
    &:focus {
      outline: none;
    }
  }

  li {
    border-radius: 3px;
    transition-property: background-color;

    &:hover {
      background-color: rgba(240,240,240,.8);
      .ripple {
        display: block;
      }
    }
  }

  > li {
    transition-duration: .2s;
    > a {
      max-width: 10vw;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
      padding: .45em;
    }
  }

  .folder {
    > a {
      padding-left: 24px;
      background-image: url(images/icon-folder.svg);
      background-repeat: no-repeat;
      background-position: 7% 44%;
    }

    ul {
      display: none;
      flex-direction: column;
      position: fixed;
      margin: 0;
      padding: .33em 0;
      background-color: rgba(242,242,242,.9);
      box-shadow: $subtle-shadow;
      border-radius: 2px;

      &.show {
        display: flex;
      }

      li {
        padding: .25em 1.25em .25em .25em;
        transition-duration: .1s;
        &:hover {
          background-color: rgba(190,190,190,.8);
        }
      }
    }
  }

  img {
    width: 16px;
    height: 16px;
    margin: 0 .2em;
  }

  .ripple {
    display: none;
    position: absolute;
    top: 0;
    left: 0;
    background: white;
    width: 40px;
    height: 40px;
    margin-left: -20px;
    margin-top: -20px;
    border-radius: 50%;
    z-index: -1;
    filter: blur(18px);
  }
}

.search {
  position: fixed;
  width: 50vw;
  margin: 0 auto;
  color: $black;
  top: 15%;
  left: 25%;
  transform: translateY(-50%);

  input {
    font-size: 24px;
    font-weight: 300;
    padding: .3em .4em .3em 36px;
    background: rgba(240,240,240,.77) no-repeat 9px 55%;
    @include icon-search($black-lite);
    border-bottom: 1px solid $black;
    border-top: none;
    border-right: none;
    border-left: none;
    color: $black-lite;
    width: 100%;
    border-radius: 6px;
    transition: background-color .2s;
    vertical-align: -webkit-baseline-middle;

    &::-webkit-input-placeholder {
      color: rgba($black-lite, .9);
    }

    &:focus,
    &.focused {
      outline: none;
      background-color: $black;
      box-shadow: $subtle-shadow;
      color: white;
      @include icon-search(white);
      -webkit-font-smoothing: antialiased;

      &::-webkit-input-placeholder {
        color: rgba(white, .6);
      }
    }
  }

  .results {
    position: absolute;
    width: inherit;
    overflow: hidden;
    margin: 0;
    padding: 0;
    list-style-type: none;
    border-radius: 3px;

    a {
      display: block;
      padding: .5em;
      color: white;
      text-decoration: none;
      width: 100%;
      background: $black;
      opacity: .8;

      &:hover,
      &:focus {
        opacity: 1;
      }
    }
  }
}